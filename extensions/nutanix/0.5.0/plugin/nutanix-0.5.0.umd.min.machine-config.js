(("undefined"!==typeof self?self:this)["webpackJsonpnutanix_0_5_0"]=("undefined"!==typeof self?self:this)["webpackJsonpnutanix_0_5_0"]||[]).push([[2],{"30be":function(e,t,i){var s=i("5eaa");t=s(!1),t.push([e.i,".addon.with-tooltip[data-v-1b1add2c]{position:relative;right:30px}",""]),e.exports=t},"3ea0":function(e,t,i){var s=i("5eaa");t=s(!1),t.push([e.i,".validation-message{padding:5px;position:absolute;bottom:-35px}",""]),e.exports=t},"547a":function(e,t,i){"use strict";i("c5de")},"5d6b":function(e,t,i){"use strict";i("ffed")},"78a1":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("9ec3");class a{constructor(e,t){this.endpoint="",this.username="",this.password="",this.port="",this.insecure=!1,this.clusterReferenceId="",this.credentialID="",t.nutanixcredentialConfig?(Object.keys(t.nutanixcredentialConfig).forEach(e=>{this[e]=t.nutanixcredentialConfig[e]}),this.credentialID=t.id):Object.keys(t).forEach(e=>{this[e]=t[e]}),this.$dispatch=e.dispatch}async testConnection(){const e=`/meta/proxy/${this.endpoint}:${this.port}`,t=e+"/api/clustermgmt/v4.0.b1/config/clusters",i={Accept:"application/json","X-API-Auth-Header":"Basic "+btoa(this.username+":"+this.password)};try{const e=await this.$dispatch("management/request",{url:t,headers:i,method:"GET",redirectUnauthorized:!1},{root:!0});return 502===e._status?{error:"Could not proxy request - URL may not be in Rancher's allow list"}:e}catch(s){return console.error(s),{error:s}}}async getClusterList(e,t){return await this.getOptions(e,"/api/clustermgmt/v4.0.b1/config/clusters","data",void 0,e=>e.config.hypervisorTypes.includes("AHV"),t)}async getImages(e,t){return await this.getOptions(e,"/api/vmm/v4.0.a1/images","data",void 0,void 0,t)}async getNetwork(e,t){return await this.getOptions(e,"/api/networking/v4.0.b1/config/subnets","data",async e=>{const t="OVERLAY"===e.subnetType?(await this.getVpc(e.vpcReference)).data:void 0;return{...e,baseName:e.name,name:"OVERLAY"===e.subnetType?`${e.name} (${t.name})`:e.name}},e=>"OVERLAY"==e.subnetType||e.clusterReference==this.clusterReferenceId&&!e.isExternal,t)}async getVpc(e){return await this.makeComputeRequest("/api/networking/v4.0.b1/config/vpcs/"+e)}async getStorageContainer(e,t){return await this.getOptions(e,"/api/storage/v4.0.a3/config/storage-containers","data",void 0,e=>e.clusterExtId==this.clusterReferenceId,t)}async getCategories(e,t){return await this.getOptions(e,"/api/prism/v4.0.a2/config/categories","data",e=>({...e,name:`${e.key}=${e.value}`}),e=>"Project"!==e.key,t)}async getProjectsName(e,t){return await this.getOptions(e,"/api/nutanix/v3/projects/list","entities",e=>({...e,name:""+e.spec.name}),void 0,t)}async getOptions(e,t,i,a,n,o){let l;if(e.busy=!0,e.enabled=!0,e.selected=Object(s["isArray"])(e.selected)?[]:"","/api/nutanix/v3/projects/list"===t?(console.log("getOptions: api: /api/nutanix/v3/projects/list"),l=await this.makeComputeRequest(t,"POST")):l=await this.makeComputeRequest(t),l&&l[i]){let t=l[i]||[];if(n&&(t=t.filter(e=>n(e))),a&&(t=await Promise.all(t.map(async e=>await a(e)))),e.options.forEach(e=>{t.push(e)}),e.options=this.convertToOptions(t),e.busy=!1,e.options.length<t.length){const i=t.filter((e,i)=>i!==t.findIndex(t=>e.name===t.name));e.duplicates=i}if(o){const t=e.options.find(e=>e.value.name===o);t&&(e.selected=t.value)}}else e.options=[],e.selected=Object(s["isArray"])(e.selected)?[]:null,e.busy=!1,e.enabled=!1}async makeComputeRequest(e,t="GET"){const i=`/meta/proxy/${this.endpoint}:${this.port}`,s=`${i}${e}`,a={Accept:"application/json","Content-Type":"application/json","X-API-Auth-Header":"Basic "+btoa(this.username+":"+this.password)};try{const e=await this.$dispatch("management/request",{url:s,headers:a,method:t,data:JSON.stringify({}),redirectUnauthorized:!1},{root:!0});return e}catch(n){console.error(n)}}convertToOptions(e){const t=e.filter((t,i)=>i===e.findIndex(e=>t.name===e.name)),i=(t||[]).sort((e,t)=>e.name.localeCompare(t.name));return i.map(e=>({label:e.name,value:e}))}}},"95a8":function(e,t,i){"use strict";i("b645")},a01b:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e.$fetchState.pending?t("Loading",{attrs:{delayed:!0}}):e._e(),t("div",[t("div",{staticClass:"nutanix-config"},[t("div",{staticClass:"title"},[e._v(" "+e._s(e.t("driver.nutanix.config.title.main"))+" ")]),e.authenticating&&!e.ready?t("div",{staticClass:"loading"},[t("i",{staticClass:"icon-spinner icon-spin icon-lg"}),t("span",[e._v(" "+e._s(e.t("driver.nutanix.config.loggin.loading"))+" ")])]):e.authenticating&&e.ready?t("div",{staticClass:"loading"},[t("i",{staticClass:"icon-checkmark icon-lg",staticStyle:{color:"green"}}),t("span",[e._v(" "+e._s(e.t("driver.nutanix.config.loggin.success"))+" ")])]):t("div",{staticClass:"loading"},[t("i",{staticClass:"icon-close icon-lg",staticStyle:{color:"red"}}),t("span",[e._v(" "+e._s(e.t("driver.nutanix.config.loggin.failed"))+" ")])])]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{labelKey:"driver.nutanix.config.component.projectName.label",placeholder:e.t("driver.nutanix.config.component.projectName.placeholder"),options:e.projectName.options,disabled:!e.projectName.enabled||e.mybusy,loading:e.projectName.busy,searchable:!1},on:{selecting:function(t){e.dynamicProjectName(t),e.canAuthenticate()}},model:{value:e.projectName.selected,callback:function(t){e.$set(e.projectName,"selected",t)},expression:"projectName.selected"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{labelKey:"driver.nutanix.config.component.cluster.label",placeholder:e.t("driver.nutanix.config.component.cluster.placeholder"),options:e.clusters.options,disabled:!e.clusters.enabled||e.mybusy,loading:e.clusters.busy,searchable:!1,required:!0},on:{selecting:function(t){e.setClusterReferenceId(t),e.canAuthenticate()}},model:{value:e.clusters.selected,callback:function(t){e.$set(e.clusters,"selected",t)},expression:"clusters.selected"}})],1)]),t("hr",{staticClass:"mt-10"}),t("div",{staticClass:"nutanix-config"},[t("div",{staticClass:"title"},[e._v(" "+e._s(e.t("driver.nutanix.config.title.properties"))+" ")])]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-4"},[t("UnitInput",{attrs:{labelKey:"driver.nutanix.config.component.vmCpus.label",suffix:e.t("driver.nutanix.config.component.vmCpus.suffix"),type:"text",disabled:!e.vmCpus.enabled||e.mybusy,loading:e.vmCpus.busy,required:!0,min:e.vmCpus.min,max:e.vmCpus.max,status:e.vmCpus.status,tooltip:e.vmCpus.tooltip},on:{keyup:function(t){e.validInput(t,e.vmCpus),e.canAuthenticate()},input:function(t){e.validInput(t,e.vmCpus),e.canAuthenticate()}},model:{value:e.vmCpus.selected,callback:function(t){e.$set(e.vmCpus,"selected",t)},expression:"vmCpus.selected"}}),t("Checkbox",{staticStyle:{"margin-top":"5px"},attrs:{value:e.vmCpuPassthrough,valueWhenTrue:!0,labelKey:"driver.nutanix.config.component.vmCpuPassthrough.label",disabled:e.mybusy},on:{input:function(t){e.vmCpuPassthrough=!e.vmCpuPassthrough}}})],1),t("div",{staticClass:"col span-4"},[t("UnitInput",{attrs:{labelKey:"driver.nutanix.config.component.vmCores.label",suffix:e.t("driver.nutanix.config.component.vmCores.suffix"),type:"text",disabled:!e.vmCores.enabled||e.mybusy,loading:e.vmCores.busy,required:!0,min:e.vmCores.min,max:e.vmCores.max,status:e.vmCores.status,tooltip:e.vmCores.tooltip},on:{keyup:function(t){e.validInput(t,e.vmCores),e.canAuthenticate()},input:function(t){e.validInput(t,e.vmCores),e.canAuthenticate()}},model:{value:e.vmCores.selected,callback:function(t){e.$set(e.vmCores,"selected",t)},expression:"vmCores.selected"}})],1),t("div",{staticClass:"col span-4"},[t("UnitInput",{attrs:{labelKey:"driver.nutanix.config.component.vmMem.label",suffix:e.t("driver.nutanix.config.component.vmMem.suffix"),type:"text",disabled:!e.vmMem.enabled||e.mybusy,loading:e.vmMem.busy,required:!0,min:e.vmMem.min,max:e.vmMem.max,status:e.vmMem.status,tooltip:e.vmMem.tooltip},on:{keyup:function(t){e.validInput(t,e.vmMem),e.canAuthenticate()},input:function(t){e.validInput(t,e.vmMem),e.canAuthenticate()}},model:{value:e.vmMem.selected,callback:function(t){e.$set(e.vmMem,"selected",t)},expression:"vmMem.selected"}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{labelKey:"driver.nutanix.config.component.vmImage.label",placeholder:e.t("driver.nutanix.config.component.vmImage.placeholder"),options:e.vmImage.options,disabled:!e.vmImage.enabled||e.mybusy,loading:e.vmImage.busy,searchable:!1,required:!0,status:e.vmImage.status,tooltip:e.vmImage.tooltip},on:{selecting:function(t){e.dynamicVmImageSize(t),e.canAuthenticate()}},model:{value:e.vmImage.selected,callback:function(t){e.$set(e.vmImage,"selected",t)},expression:"vmImage.selected"}})],1),t("div",{staticClass:"col span-6"},[t("UnitInput",{attrs:{labelKey:"driver.nutanix.config.component.vmImageSize.label",suffix:e.t("driver.nutanix.config.component.vmImageSize.suffix"),min:e.vmImageSize.min,max:e.vmImageSize.max,disabled:!e.vmImageSize.enabled||e.mybusy,loading:e.vmImageSize.busy,required:!0,status:e.vmImageSize.status,tooltip:e.vmImageSize.tooltip},on:{keyup:function(t){e.validInput(t,e.vmImageSize),e.canAuthenticate()},input:function(t){e.validInput(t,e.vmImageSize),e.canAuthenticate()}},model:{value:e.vmImageSize.selected,callback:function(t){e.$set(e.vmImageSize,"selected",t)},expression:"vmImageSize.selected"}})],1)]),t("div",{staticClass:"row mt-10",staticStyle:{"align-items":"center"}},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{labelKey:"driver.nutanix.config.component.vmNetwork.label",placeholder:e.t("driver.nutanix.config.component.vmNetwork.placeholder"),taggable:!0,multiple:!0,options:e.networks.options,disabled:!e.networks.enabled||e.mybusy,loading:e.networks.busy,searchable:!0,required:!0},on:{input:function(t){e.dynamicNetwork(),e.canAuthenticate()},selecting:function(t){e.labelSelectAddWrongTag(t,e.networks),e.dynamicNetwork(),e.canAuthenticate()}},model:{value:e.networks.selected,callback:function(t){e.$set(e.networks,"selected",t)},expression:"networks.selected"}})],1),t("div",{staticClass:"col span-6",staticStyle:{"padding-left":"10px"}},[t("div",{staticClass:"nutanix-config"},[t("div",{staticClass:"title"},[e._v(" "+e._s(e.t("driver.nutanix.config.title.bootType"))+" ")])]),t("RadioGroup",{attrs:{name:"bootConfiguration",options:["Legacy","UEFI"],row:!0,value:e.bootType,disabled:e.mybusy},on:{input:function(t){e.bootType=t}}})],1)]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-12"},[t("LabeledSelect",{attrs:{labelKey:"driver.nutanix.config.component.vmCategories.label",placeholder:e.t("driver.nutanix.config.component.vmCategories.placeholder"),taggable:!0,multiple:!0,options:e.vmCategories.options,disabled:!e.vmCategories.enabled||e.mybusy,loading:e.vmCategories.busy},on:{selecting:function(t){return e.labelSelectAddWrongTag(t,e.vmCategories)}},model:{value:e.vmCategories.selected,callback:function(t){e.$set(e.vmCategories,"selected",t)},expression:"vmCategories.selected"}})],1)]),t("Checkbox",{staticStyle:{"margin-top":"5px"},attrs:{val:"",value:e.vmSerialPort,valueWhenTrue:!0,labelKey:"driver.nutanix.config.component.vmSerialPort.label",disabled:e.mybusy},on:{input:function(t){e.vmSerialPort=!e.vmSerialPort}}}),t("Collapse",{attrs:{open:e.is_SC_colapse,title:e.t("driver.nutanix.config.title.collapseAdditionalDisk")},on:{"update:open":function(t){e.is_SC_colapse=!e.is_SC_colapse}}},[t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("UnitInput",{attrs:{labelKey:"driver.nutanix.config.component.diskSize.label",suffix:e.t("driver.nutanix.config.component.diskSize.suffix"),type:"text",disabled:!e.additionalDiskSize.enabled||e.mybusy,loading:e.additionalDiskSize.busy},on:{keyup:function(t){e.dynamicStorageContainer(t),e.canAuthenticate()}},model:{value:e.additionalDiskSize.selected,callback:function(t){e.$set(e.additionalDiskSize,"selected",t)},expression:"additionalDiskSize.selected"}})],1),t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{labelKey:"driver.nutanix.config.component.storageContainer.label",placeholder:e.t("driver.nutanix.config.component.storageContainer.placeholder"),options:e.storageContainer.options,disabled:!e.additionalDiskSize.selected||!e.storageContainer.enabled||e.mybusy,loading:e.storageContainer.busy,searchable:!1},on:{selecting:function(t){return e.canAuthenticate()}},model:{value:e.storageContainer.selected,callback:function(t){e.$set(e.storageContainer,"selected",t)},expression:"storageContainer.selected"}})],1)])])]),t("hr",{staticClass:"mt-10"}),t("div",{staticClass:"nutanix-config"},[t("div",{staticClass:"title"},[e._v(" "+e._s(e.t("driver.nutanix.config.title.cloudInit"))+" ")])]),t("div",{staticClass:"row mt-10"},[t("div",{staticClass:"col span-12"},[t("CodeMirror",{staticStyle:{background:"#f5f5f5"},attrs:{mode:"edit",minHeight:"5",value:e.cloudInit,options:e.mybusy?{readOnly:!0,cursorBlinkRate:-1}:{readOnly:!1},asTextArea:!1},on:{onInput:function(t){e.cloudInit=t}}})],1)])],1),e.errors.length?t("div",e._l(e.errors,(function(i,s){return t("div",{key:s},[t("Banner",{attrs:{color:"error",label:e.stringify(i)}})],1)})),0):e._e()],1)},a=[],n=i("15ca"),o=i("6418"),l=i("305c"),r=i("466b"),u=i("a232"),d=i("8c26"),c=i("6a45"),p=i("1032"),h=i("f2c8"),m=i("907c"),v=i("3e9d"),g=i("da25"),f=i("78a1"),b=function(){var e=this,t=e._self._c;return t("LabeledInput",e._b({ref:"value",attrs:{value:e.displayValue,type:"number",min:e.min,mode:e.mode,label:e.label,delay:e.delay,"label-key":e.labelKey,tooltip:e.tooltip,"tooltip-key":e.tooltipKey,required:e.required,placeholder:e.placeholder,"hide-arrows":e.hideArrows,status:e.status},on:{change:function(t){return e.update(t.target.value,"input")},blur:function(t){return e.update(t.target.value,"input")},keyup:function(t){return e.update(t.target.value,"keyup")}},scopedSlots:e._u([{key:"suffix",fn:function(){return[e.displayUnit?t("div",{staticClass:"addon",class:{"with-tooltip":e.tooltip||e.tooltipKey}},[e._v(" "+e._s(e.displayUnit)+" ")]):e._e()]},proxy:!0}])},"LabeledInput",e.$attrs,!1))},y=[],C=i("d37d"),x=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{class:{"labeled-input":!0,focused:e.focused,[e.mode]:!0,disabled:e.isDisabled,[e.status]:e.status,suffix:e.hasSuffix,"has-tooltip":e.hasTooltip,"compact-input":e.isCompact,hideArrows:e.hideArrows}},[e._t("label",(function(){return[e.hasLabel?t("label",[e.labelKey?t("t",{attrs:{k:e.labelKey}}):e.label?[e._v(e._s(e.label))]:e._e(),e.requiredField?t("span",{staticClass:"required"},[e._v("*")]):e._e()],2):e._e()]})),e._t("prefix"),e._t("field",(function(){return["multiline"===e.type||"multiline-password"===e.type?t("TextAreaAutoGrow",e._b({ref:"value",class:{conceal:"multiline-password"===e.type},attrs:{maxlength:e._maxlength,disabled:e.isDisabled,value:e.value,placeholder:e._placeholder,autocapitalize:"off"},on:{input:function(t){return e.onInput(t)},focus:e.onFocus,blur:e.onBlur}},"TextAreaAutoGrow",e.$attrs,!1)):t("input",e._b({ref:"value",class:{"no-label":!e.hasLabel},attrs:{maxlength:e._maxlength,disabled:e.isDisabled,type:"cron"===e.type?"text":e.type,placeholder:e._placeholder,autocomplete:"off",autocapitalize:"off","data-lpignore":e.ignorePasswordManagers},domProps:{value:e.value},on:{input:function(t){return e.onInput(t.target.value)},focus:e.onFocus,blur:e.onBlur,keyup:function(t){return e.$emit("keyup",t)}}},"input",e.$attrs,!1))]})),e._t("suffix"),e.hasTooltip?t("LabeledTooltip",{attrs:{hover:e.hoverTooltip,value:e.tooltipValue,status:e.status}}):e._e(),e.validationMessage?t("LabeledTooltip",{attrs:{hover:e.hoverTooltip,value:e.validationMessage}}):e._e(),e.cronHint?t("label",{staticClass:"cron-label"},[e._v(e._s(e.cronHint))]):e._e(),e.subLabel?t("label",{staticClass:"sub-label"},[e._v(e._s(e.subLabel))]):e._e()],2)},w=[],k=i("8bbf"),I=i.n(k),S=i("df7c"),_=i("480e"),N=i("c230"),z=i("e1bc"),O=i("2cb5"),$=i("2105"),j=i.n($),A=i("1a5f"),T=i("9ec3"),M=I.a.extend({components:{LabeledTooltip:z["a"],TextAreaAutoGrow:N["a"]},mixins:[_["a"],S["a"]],props:{type:{type:String,default:"text"},status:{type:String,default:null},subLabel:{type:String,default:null},tooltip:{default:null,type:[String,Object]},hoverTooltip:{type:Boolean,default:!0},ignorePasswordManagers:{default:!1,type:Boolean},maxlength:{type:Number,default:null},hideArrows:{type:Boolean,default:!1},delay:{type:Number,default:0}},data(){return{updated:!1,validationErrors:"",t:this.$store.getters["i18n/t"]}},computed:{onInput(){return this.delay?Object(T["debounce"])(this.delayInput,this.delay):this.delayInput},hasLabel(){return!this.isCompact&&(!!this.label||!!this.labelKey||!!this.$slots.label)},hasTooltip(){return!!this.tooltip||!!this.tooltipKey},tooltipValue(){if(this.hasTooltip)return this.tooltipKey?this.t(this.tooltipKey):this.tooltip},hasSuffix(){return!!this.$slots.suffix},cronHint(){if("cron"===this.type&&this.value){if(!Object(A["isValidCron"])(this.value))return this.t("generic.invalidCron");try{const e=j.a.toString(this.value);return e}catch(e){return this.t("generic.invalidCron")}}},_placeholder(){return this.placeholder?this.placeholder.toString():this.placeholderKey?this.t(this.placeholderKey):""},_maxlength(){return"text"===this.type&&this.maxlength?this.maxlength:null}},methods:{focus(){const e=this.$refs.value;e&&e.focus()},select(){const e=this.$refs.value;e&&e.select()},delayInput(e){this.$emit("input",e)},onFocus(){this.onFocusLabeled()},onBlur(e){this.$emit("blur",e),this.onBlurLabeled()},escapeHtml:O["b"]}}),P=M,D=(i("547a"),i("f3a8"),i("d802")),L=Object(D["a"])(P,x,w,!1,null,"09bbb1b2",null),E=L.exports,R={components:{LabeledInput:E},props:{outputAs:{type:String,default:"number"},outputModifier:{type:Boolean,default:!1},inputExponent:{type:Number,default:0},baseUnit:{type:String,default:"B"},hideArrows:{type:Boolean,default:!1},increment:{type:Number,default:1e3},suffix:{type:String,default:null},mode:{type:String,default:g["b"]},value:{type:[Number,String],default:null},label:{type:String,default:null},labelKey:{type:String,default:null},tooltip:{type:[String,Object],default:null},tooltipKey:{type:String,default:null},required:{type:Boolean,default:!1},min:{type:[Number,String],default:0},placeholder:{type:[String,Number],default:""},status:{type:String,default:null},delay:{type:Number,default:0}},computed:{unit(){let e;return e=this.inputExponent>=0?C["b"][this.inputExponent]:C["a"][-1*this.inputExponent],1024===this.increment&&e&&(e+="i"),e},parsedValue(){return"string"===typeof this.value?Object(C["d"])(this.value):this.value},displayValue(){let e="";return(this.parsedValue||0===this.parsedValue)&&(e=Object(C["c"])(this.parsedValue,{increment:this.increment,addSuffix:!1,maxExponent:this.inputExponent,minExponent:this.inputExponent})),e},displayUnit(){return this.suffix?this.suffix:this.unit+this.baseUnit}},methods:{focus(){const e=this.$refs.value;e&&e.focus()},update(e,t){let i=""===e?null:e;this.outputModifier?i=null===i?null:`${e}${this.unit}`:"string"===this.outputAs?i=null===i?"":""+e:i&&(i=this.unit?Object(C["d"])(`${i}${this.unit}`):parseInt(i)),this.$emit(t,i)}}},K=R,U=(i("5d6b"),Object(D["a"])(K,b,y,!1,null,"1b1add2c",null)),q=U.exports;function B(e=!1,t=null,i=[]){return{options:i,selected:t,busy:!1,enabled:e,baseOption:null}}function V(e=!1,t=null,i=null,s=null){return{options:[],selected:t,min:i,max:s,busy:!1,enabled:e,status:"",tooltip:""}}var F={components:{Banner:o["a"],Loading:n["a"],KeyValue:u["a"],LabeledSelect:r["a"],UnitInput:q,CodeMirror:d["a"],Collapse:c["a"],Checkbox:p["a"],RadioGroup:h["a"],UnitInput:q},mixins:[l["a"]],props:{uuid:{type:String,required:!0},cluster:{type:Object,default:()=>({})},credentialId:{type:String,required:!0},disabled:{type:Boolean,default:!1},busy:{type:Boolean,default:!1},provider:{type:String,required:!0}},async fetch(){var e,t;this.credentialId&&(this.$emit("validationChanged",!1),this.mode!=g["a"]?(await this.initAuthentification(),this.clusters.selected=this.clusters.baseOption.filter(e=>e.label==this.value.cluster)[0],void 0!==this.clusters.selected&&(await this.setClusterReferenceId(this.clusters.selected),this.projectName.selected=null===(e=this.projectName.options.find(e=>e.value.name===this.value.project))||void 0===e?void 0:e.value,this.vmCpus.selected=this.value.vmCpus,this.vmCpuPassthrough=this.value.vmCpuPassthrough,this.vmCores.selected=this.value.vmCores,this.vmMem.selected=this.value.vmMem/1024,this.vmImage.selected=null===(t=this.vmImage.options.find(e=>e.value.name===this.value.vmImage))||void 0===t?void 0:t.value,this.vmImageSize.selected=this.value.vmImageSize,this.networks.selected=this.value.vmNetwork.map(e=>this.networks.baseOption.find(t=>t.value.extId===e)),this.bootType="legacy"===this.value.bootType?"Legacy":"UEFI",this.vmCategories.selected=this.value.vmCategories.map(e=>this.vmCategories.options.find(t=>t.value.name===e)),this.vmSerialPort=this.value.vmSerialPort,this.additionalDiskSize.selected=this.value.diskSize,0!==this.additionalDiskSize.selected&&null!==this.additionalDiskSize.selected&&(this.storageContainer.selected=this.storageContainer.options.find(e=>e.value.containerExtId===this.value.storageContainer)),this.cloudInit=this.value.cloudInit,this.$emit("validationChanged",!0),this.mode==g["c"]&&(this.mybusy=!0))):this.initAuthentification())},data(){return this.InitData()},watch:{credentialId(){this.$fetch()}},methods:{stringify:v["b"],async initAuthentification(){let e=this.InitData();Object.keys(e).forEach(t=>{this[t]=e[t]});try{this.credential=await this.$store.dispatch("rancher/find",{type:m["c"].CLOUD_CREDENTIAL,id:this.credentialId})}catch(i){this.credential=null}try{const e=this.credentialId.replace(":","/"),t=await this.$store.dispatch("management/find",{type:m["e"],id:e}),i=t.data["nutanixcredentialConfig-password"],s=atob(i);this.password=s,this.havePassword=!0,this.ready=!0}catch(i){this.password="",this.havePassword=!1,console.error(i)}this.$set(this,"authenticating",!0);const t=new f["a"](this.$store,this.credential);t.password=this.password,this.os=t,await this.setConfiguration()},InitData(){return{authenticating:!1,ready:!1,os:null,password:null,havePassword:!1,clusters:B(),clusterReferenceId:"",projectName:B(!0,null,[{name:"-- NO PROJECT --"}]),vmCpus:V(!0,"2",2,128),vmCpuPassthrough:!1,vmCores:V(!0,"1",1,128),vmMem:V(!0,"4",4,512),vmImage:B(),vmImageSize:V(!0,"0",0,1e4),networks:B(!1,[]),additionalDiskSize:B(!1,0),storageContainer:B(),is_SC_colapse:!1,cloudInit:"#cloud-config\n\n",vmCategories:B(!1,[]),vmSerialPort:!1,bootType:"Legacy",t:this.$store.getters["i18n/t"],mybusy:!1,errors:[]}},async setConfiguration(){var e,t,i,s;if(await this.os.getProjectsName(this.projectName,null===(e=this.value)||void 0===e?void 0:e.projectName),!this.projectName.enabled)return this.$set(this,"authenticating",!1),void this.errors.push("Unable to get Nutanix Projects Name");await this.os.getClusterList(this.clusters,null===(t=this.value)||void 0===t?void 0:t.clusterName).then(()=>{this.clusters.enabled||this.errors.push("Unable to get Nutanix cluster"),this.clusters.baseOption=this.clusters.options,this.networks.enabled=!1}),await this.os.getImages(this.vmImage,null===(i=this.value)||void 0===i?void 0:i.imageName).then(()=>{this.vmImage.enabled||this.errors.push("Unable to get Nutanix Images")}),await this.os.getCategories(this.vmCategories,null===(s=this.value)||void 0===s?void 0:s.vmCategories).then(()=>{this.vmCategories.enabled||this.errors.push("Unable to get Nutanix vmCategories")})},async setClusterReferenceId(e){var t,i;this.os.clusterReferenceId=e.value.extId,this.networks.options=[],this.storageContainer.options=[],await this.os.getNetwork(this.networks,null===(t=this.value)||void 0===t?void 0:t.vmNetwork).then(()=>{if(this.networks.enabled||this.errors.push("Unable to get Nutanix Network"),this.networks.baseOption=this.networks.options,this.projectName.selected){let e=this.projectName.selected.status.resources.subnet_reference_list.map(e=>e.uuid);this.networks.options=this.networks.baseOption.filter(t=>e.includes(t.value.extId)),this.networks.baseOption=this.networks.options}0===this.networks.options.length?this.networks.enabled=!1:this.networks.enabled=!0}),await this.os.getStorageContainer(this.storageContainer,null===(i=this.value)||void 0===i?void 0:i.storageContainer).then(()=>{this.storageContainer.enabled||this.errors.push("Unable to get Nutanix storageContainer"),this.additionalDiskSize.enabled=!0})},dynamicProjectName(e){var t;if("-- NO PROJECT --"==(null===(t=this.projectName.selected)||void 0===t?void 0:t.name))this.projectName.selected=null,this.clusters.options=this.clusters.baseOption;else{let t=e.value.status.resources.cluster_reference_list.map(e=>e.uuid);this.clusters.options=this.clusters.baseOption.filter(e=>t.includes(e.value.extId))}this.clusters.selected=null,this.networks.selected=[],this.networks.enabled=!1,this.additionalDiskSize.selected=0,this.additionalDiskSize.enabled=!1,this.storageContainer.selected=null,0===this.clusters.options.length?this.clusters.enabled=!1:this.clusters.enabled=!0},dynamicVmImageSize(e){var t;this.vmImageSize.min=10+Math.ceil(e.value.sizeBytes/1073741824),this.vmImageSize.selected=10+Math.ceil(e.value.sizeBytes/1073741824),void 0!==(null===(t=this.vmImage)||void 0===t||null===(t=t.duplicates)||void 0===t?void 0:t.find(t=>t.name===e.value.name))?(this.vmImage.status="warning",this.vmImage.tooltip=this.t("driver.nutanix.config.component.vmImage.duplicates")):(this.vmImage.status="",this.vmImage.tooltip="")},dynamicNetwork(){0!==this.networks.selected.length?this.networks.selected[0].subnetType?this.networks.options=this.networks.baseOption.filter(e=>{var t,i;return this.networks.selected[0].subnetType===e.value.subnetType&&(null===(t=this.networks.selected[0])||void 0===t?void 0:t.vpcReference)==(null===(i=e.value)||void 0===i?void 0:i.vpcReference)}):(this.networks.selected=this.networks.selected.filter(e=>e.value),this.networks.options=this.networks.baseOption.filter(e=>{var t,i;return this.networks.selected[0].value.subnetType===e.value.subnetType&&(null===(t=this.networks.selected[0].value)||void 0===t?void 0:t.vpcReference)==(null===(i=e.value)||void 0===i?void 0:i.vpcReference)})):this.networks.options=this.networks.baseOption},dynamicStorageContainer(e){this.additionalDiskSize.selected=e,0!==this.additionalDiskSize.selected&&null!==this.additionalDiskSize.selected?this.storageContainer.enabled=!0:this.storageContainer.enabled=!1},labelSelectAddWrongTag(e,t){t.selected=e.filter(e=>e.value)},syncValue(){var e,t,i,s,a,n;this.value.cluster=null===(e=this.clusters.selected)||void 0===e?void 0:e.name,this.value.project="-- NO PROJECT --"==(null===(t=this.projectName.selected)||void 0===t?void 0:t.name)?null:null===(i=this.projectName.selected)||void 0===i?void 0:i.name,this.value.vmCpus=this.vmCpus.selected.toString(),this.value.vmCpuPassthrough=this.vmCpuPassthrough,this.value.vmCores=this.vmCores.selected.toString(),this.value.vmMem=(1024*this.vmMem.selected).toString(),this.value.vmImage=null===(s=this.vmImage.selected)||void 0===s?void 0:s.name,this.value.vmImageSize=this.vmImageSize.selected.toString(),this.value.vmNetwork=this.networks.selected.map(e=>e.value.extId),this.value.bootType=this.bootType.toLowerCase(),this.value.vmCategories=void 0===(null===(a=this.vmCategories.selected[0])||void 0===a?void 0:a.label)?this.vmCategories.selected.map(e=>e.name):this.vmCategories.selected.map(e=>e.value.name),this.value.vmSerialPort=this.vmSerialPort,null!==this.additionalDiskSize.selected?this.value.diskSize=this.additionalDiskSize.selected.toString():this.value.diskSize=this.additionalDiskSize.selected,0!==this.additionalDiskSize.selected&&null!==this.additionalDiskSize.selected&&(this.value.storageContainer=null===(n=this.storageContainer.selected)||void 0===n?void 0:n.containerExtId),this.value.cloudInit=this.cloudInit},validInput(e,t){t.selected=e,t.selected<t.min||t.selected>t.max?(t.status="error",t.tooltip=this.t("driver.nutanix.config.component.vmCpus.tooltip")+` (${t.min} - ${t.max})`):(t.status="",t.tooltip="")},canAuthenticate(){if(0===this.additionalDiskSize.selected||null===this.additionalDiskSize.selected||""!==this.storageContainer.selected)return this.clusters.selected&&this.vmCpus.selected&&this.vmCores.selected&&this.vmMem.selected&&this.vmImage.selected&&this.vmImageSize.selected&&this.networks.selected.length>0?(console.log("canAuthenticate: true"),void this.$emit("validationChanged",!0)):void this.$emit("validationChanged",!1);this.$emit("validationChanged",!1)},test(){this.syncValue()}}},H=F,G=(i("95a8"),Object(D["a"])(H,s,a,!1,null,"062597a6",null));t["default"]=G.exports},a789:function(e,t,i){var s=i("5eaa");t=s(!1),t.push([e.i,".file-button[data-v-062597a6]{align-items:center;position:absolute;top:0;right:0;height:100%;display:flex}.file-button>.file-selector[data-v-062597a6]{height:59px;border-top-left-radius:0;border-bottom-left-radius:0}.nutanix-config[data-v-062597a6]{display:flex;align-items:center}.nutanix-config>.title[data-v-062597a6]{font-weight:700;padding:4px 0}.nutanix-config>.loading[data-v-062597a6]{margin-left:20px;display:flex;align-items:center}.nutanix-config>.loading>i[data-v-062597a6]{margin-right:4px}",""]),e.exports=t},b645:function(e,t,i){var s=i("a789");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var a=i("0ed3").default;a("ef099eb4",s,!0,{sourceMap:!1,shadowMode:!1})},bdc3:function(e,t,i){var s=i("3ea0");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var a=i("0ed3").default;a("3821e7db",s,!0,{sourceMap:!1,shadowMode:!1})},c5a6:function(e,t,i){var s=i("5eaa");t=s(!1),t.push([e.i,".labeled-input.view input[data-v-09bbb1b2]{text-overflow:ellipsis}.hideArrows input[data-v-09bbb1b2]::-webkit-inner-spin-button,.hideArrows input[data-v-09bbb1b2]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.hideArrows input[type=number][data-v-09bbb1b2]{-moz-appearance:textfield}",""]),e.exports=t},c5de:function(e,t,i){var s=i("c5a6");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var a=i("0ed3").default;a("b8624120",s,!0,{sourceMap:!1,shadowMode:!1})},dad7:function(e,t,i){var s={"./csp/metadata.json":"7f57","./federal/metadata.json":"66fa","./rgs/metadata.json":"45d2","./suse/metadata.json":"1d5f"};function a(e){var t=n(e);return i(t)}function n(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=n,e.exports=a,a.id="dad7"},f3a8:function(e,t,i){"use strict";i("bdc3")},ffed:function(e,t,i){var s=i("30be");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var a=i("0ed3").default;a("04079aec",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=nutanix-0.5.0.umd.min.machine-config.js.map